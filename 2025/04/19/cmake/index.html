<!DOCTYPE html>
<html lang="en">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="cmake" />
    <meta name="hexo-theme-A4" content="v1.9.7" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.webp">
    <title>shenzaoyi`s blog</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--è¿”å›é¡¶éƒ¨css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--ç›®å½•-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery-bundle.min.css">


<meta name="generator" content="Hexo 7.3.0"></head>
    
    
        <style>
            .index-main{
                max-width:  880px;
            }
        </style>

    
    



    

    
    

    
    
    
    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <style>
            .header-img {
                width: 56px;
                height: auto;
                object-fit: cover; /* ä¿æŒå›¾ç‰‡æ¯”ä¾‹ */
                transition: transform 0.3s ease-in-out; 
                border-radius: 50%; 
            }
            
            .header-img:hover {
                animation: rotateAnimation 2s linear infinite; /* æ‚¬åœæ—‹è½¬åŠ¨ç”» */
            }
            @keyframes rotateAnimation {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }
            
        </style>
        <img 
            alt="^-^" 
            cache-control="max-age=86400" 
            class="header-img" 
            src="/img/favicon.webp" 
        />
        <div class="header-content">
            <a class="logo" href="/">shenzaoyi`s blog</a> 
            <span class="description">0 error(s), 0 warning(s)</span> 
        </div>
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">é¦–é¡µ</a></li>
            
        
            
                <li><a href="/list/">æ–‡ç« </a></li>
            
        
            
                <li><a href="/about/">å…³äº</a></li>
            
        
            
                <li><a href="/tags/">æ ‡ç­¾</a></li>
            
        
            
                <li><a href="/categories/">åˆ†ç±»</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    cmake
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                    <span>æœ€è¿‘æ›´æ–°ï¼š2025-04-20</span> 
                
                
                    
                        &nbsp; | &nbsp;
                    
                     <span>å­—æ•°æ€»è®¡ï¼š1.5k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>é˜…è¯»ä¼°æ—¶ï¼š6åˆ†é’Ÿ</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span id="busuanzi_container_page_pv">
                        é˜…è¯»é‡ï¼š<span id="busuanzi_value_page_pv"></span>æ¬¡
                    </span>
                
            </div>
    

    <div class="post-md">
        
            
                <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#cmake"><span class="post-toc-text">cmake</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Intro"><span class="post-toc-text">Intro</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="post-toc-text">è¯­æ³•</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%9F%BA%E6%9C%AC"><span class="post-toc-text">åŸºæœ¬</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%8F%98%E9%87%8F%E5%92%8C%E7%BC%93%E5%AD%98"><span class="post-toc-text">å˜é‡å’Œç¼“å­˜</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#cmake-%E7%BC%96%E7%A8%8B"><span class="post-toc-text">cmake ç¼–ç¨‹</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="post-toc-text">æµç¨‹æ§åˆ¶</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#generator-expressions"><span class="post-toc-text">generator-expressions</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%AE%8F%E5%AE%9A%E4%B9%89-%E5%92%8C-%E5%87%BD%E6%95%B0"><span class="post-toc-text">å®å®šä¹‰ å’Œ å‡½æ•°</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%8F%82%E6%95%B0%E6%8E%A7%E5%88%B6"><span class="post-toc-text">å‚æ•°æ§åˆ¶</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E6%8E%A8%E8%8D%90%E7%9A%84%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="post-toc-text">æ¨èçš„ç›®å½•ç»“æ„</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#References"><span class="post-toc-text">References</span></a></li></ol></li></ol>
            
        
        <div class=".article-gallery"><h1 id="cmake"><a href="#cmake" class="headerlink" title="cmake"></a>cmake</h1><h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><p>make å·¥å…·æ ¹æ®Makefileä¸­çš„å‘½ä»¤æ¥è¿›è¡Œç¼–è¯‘å’Œé“¾æ¥ï¼Œä½†æ˜¯å·¥ç¨‹å¤æ‚çš„æ—¶å€™ï¼ŒåŠ ä¸Šå„ç§Makeå·¥å…·çš„å‡ºç°ï¼Œæ‰‹å†™Makefileå˜å¾—å›°éš¾ï¼Œ Cmake æ ¹æ®CMakeLists.txt å¸®åŠ©å†™å‡ºè·¨å¹³å°çš„Makefileã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// linux</span><br><span class="line">          cmake           make       gcc</span><br><span class="line">CMakeLists.txt -----&gt; Makefile ----&gt; Cmds ---&gt; Binary</span><br><span class="line">// windows</span><br><span class="line">CMakeLists.txt â†’ CMake ç”Ÿæˆå·¥ç¨‹æ–‡ä»¶ï¼ˆæ¯”å¦‚ Visual Studio çš„ .sln/.vcxprojï¼Œæˆ–è€… Ninja/Makefileï¼‰ â†’ è°ƒç”¨å¯¹åº”æ„å»ºå·¥å…·ï¼ˆVS/msbuild/ninja/mingw32-makeï¼‰â†’ ç”Ÿæˆ .exe  </span><br></pre></td></tr></table></figure>

<p>cmake æ„å»ºæµç¨‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake ..</span><br><span class="line">make / cmake --build .</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cmake -S . -B build</span><br><span class="line">cmake --build build</span><br><span class="line">// more: -j N å¤šæ ¸æ„å»ºï¼Œ -v è¯¦ç»†è¾“å‡ºï¼Œ -t / --target éƒ¨åˆ†æ„å»º</span><br></pre></td></tr></table></figure>

<p>æŒ‡å®šç¼–è¯‘å™¨ï¼Œ åªéœ€è¦åœ¨ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶åœ¨ç©ºç›®å½•ä¸­è¿›è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CC=clang CXX=clang++ cmake .. </span><br><span class="line">// ç±» Unix ä¸­ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œwindowsä¸€èˆ¬ä½¿ç”¨</span><br><span class="line">-G <span class="string">&quot;Visual Studio 17 2022&quot;</span></span><br></pre></td></tr></table></figure>

<p>æŒ‡å®šç”Ÿæˆå™¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-G <span class="string">&quot;my tool&quot;</span> </span><br><span class="line">// æˆ–ç¯å¢ƒå˜é‡</span><br><span class="line">CMAKE_GENERATOR</span><br></pre></td></tr></table></figure>

<p>å…¶ä»–é€‰é¡¹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-DCMAKE_BUILD_TYPE= // Release, Debug, RelWithDeblnfo(Realease with debug info)</span><br><span class="line">-DCMAKE_INSTALL_PREFIX= / å®‰è£…ç›®å½•ï¼Œ ä¹Ÿå°±æ˜¯æŠŠbuildç›®å½•ä¸‹ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶å¤åˆ¶åˆ°ä¸€äº›æ ‡å‡†çš„ä½ç½®ï¼Œ å¦‚/usr/local/bin </span><br><span class="line">-DBUILD_TESTING= // å¯ç”¨æµ‹è¯•çš„é€šç”¨åç§°</span><br><span class="line">--trace è¾“å‡º</span><br><span class="line">-DCMAKE_CXX_STANDARD=11 // æŒ‡å®šcppç‰ˆæœ¬çš„å®</span><br><span class="line"><span class="built_in">set</span>(HOME /home/robin/Linux/Sort)</span><br><span class="line"><span class="built_in">set</span>(EXECUTABLE_OUTPUT_PATH <span class="variable">$&#123;HOME&#125;</span>/bin) <span class="comment"># è¿™ä¸¤æ¡æŒ‡å®šè¾“å‡ºç›®å½•</span></span><br></pre></td></tr></table></figure>

<h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><h3 id="åŸºæœ¬"><a href="#åŸºæœ¬" class="headerlink" title="åŸºæœ¬"></a>åŸºæœ¬</h3><p>CMakeLists.txt</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ &quot;#&quot; æ³¨é‡Š</span></span><br><span class="line"><span class="comment"># æ¯ä¸ªCMakeLists.txt ç¬¬ä¸€è¡Œå¿…é¡»æŒ‡å®šæœ€ä½ç‰ˆæœ¬, cmake_minimun_requiredå¤§å°å†™ä¸æ•æ„Ÿï¼Œæ¨èå°å†™</span></span><br><span class="line">cmake_minimun_required(VERSION <span class="number">3.1</span>) </span><br><span class="line"><span class="comment"># æ¥ä¸‹æ¥å°±æ˜¯è®¾ç½®é¡¹ç›®çš„å„ç§å‚æ•°</span></span><br><span class="line"><span class="keyword">project</span>(MyProject VERSION <span class="number">1.0</span></span><br><span class="line">                  DESCRIPTION <span class="string">&quot;Very nice project&quot;</span></span><br><span class="line">                  LANGUAGES CXX)</span><br><span class="line"><span class="comment"># é¡¹ç›®åç§°ï¼Œ ç‰ˆæœ¬ï¼Œ æè¿° DESCRIPTION å…³é”®å­—æ·»åŠ æè¿°ï¼Œ è¯­è¨€å¯ä»¥æ˜¯CXX, C ç­‰</span></span><br><span class="line"><span class="comment"># VERSION è®¾ç½®äº†ä¸€ç³»åˆ—å˜é‡ï¼Œä¾‹å¦‚ MyProject_VERSION å’Œ PROJECT_VERSIONï¼Œ åœ¨ CMake çš„åç»­è„šæœ¬é‡Œã€å®‰è£…è„šæœ¬ã€æ‰“åŒ…ã€ä»£ç é‡Œ</span></span><br><span class="line"><span class="comment"># ç­‰ï¼Œéƒ½å¯ä»¥æ–¹ä¾¿å¼•ç”¨é¡¹ç›®çš„ç‰ˆæœ¬å·ï¼ˆè€Œä¸”ä¸ç”¨è‡ªå·±æ‰‹å·¥ç»´æŠ¤ï¼‰ã€‚å¦‚</span></span><br><span class="line"><span class="comment"># project(MyApp VERSION 2.5.1)  </span></span><br><span class="line"><span class="comment"># message(STATUS &quot;$&#123;MyApp_VERSION&#125;&quot;)      # è¾“å‡º 2.5.1  </span></span><br><span class="line"><span class="comment"># message(STATUS &quot;$&#123;PROJECT_VERSION&#125;&quot;)    # ä¹Ÿæ˜¯ 2.5.1 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">add_executable</span>(one, two.cpp, three.h) </span><br><span class="line"><span class="comment"># one-&gt; å¯æ‰§è¡Œæ–‡ä»¶çš„åç§°/target, ä¹‹åè·Ÿæºæ–‡ä»¶åˆ—è¡¨ï¼Œ å¤´æ–‡ä»¶ä¼šè¢«å¿½ç•¥ï¼Œåˆ—å‡ºçš„åŸå› æ˜¯æ–¹ä¾¿åœ¨IDEå±•ç¤º</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆåº“</span></span><br><span class="line"><span class="keyword">add_library</span>(one, STATIC, two.cpp, three.h)</span><br><span class="line"><span class="comment"># åº“çš„ç±»å‹ï¼šSTATIC, SHARED, MODULE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ ç›®æ ‡ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">target_include_directories</span>(one, PUBLIC, <span class="keyword">include</span>)</span><br><span class="line"><span class="comment"># ä¸ºç›®æ ‡æ·»åŠ ä¸€ä¸ªç›®å½•ï¼Œone(å¦‚æœæ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼Œ ä¸€èˆ¬ä¸ä¼šè¢«å…¶ä»–ç›®æ ‡é“¾æ¥ï¼Œä¸‹ä¸€ä¸ªå‚æ•°æ— æ„ä¹‰), è€Œå¯¹äºåº“ï¼ŒPUBLIC è¡¨ç¤ºå½“å‰åº“éœ€è¦è¿™ä¸ªç›®å½• (include)ï¼Œä»»ä½•é“¾æ¥è¿™ä¸ªåº“çš„ç›®æ ‡éƒ½éœ€è¦è¿™ä¸ªå¤´æ–‡ä»¶ç›®å½•ï¼Œ PRIVATE: ä»…å¯¹å½“å‰ç›®æ ‡ç”Ÿæ•ˆï¼Œé“¾æ¥æ­¤åº“çš„ç›®æ ‡ä¸éœ€è¦ï¼ŒINTERFACE: å½“å‰æ— </span></span><br><span class="line"><span class="comment"># æ•ˆï¼Œ å…¶ä»–é“¾æ¥åˆ°æ­¤åº“çš„ç›®æ ‡æœ‰æ•ˆ</span></span><br><span class="line"><span class="keyword">add_library</span>(another, STATIC, another.cpp, another.h)</span><br><span class="line"><span class="comment"># é“¾æ¥</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(another, PUBLIC, one) </span><br><span class="line"><span class="comment"># å°†ç›®æ ‡ one é“¾æ¥åˆ°anotherä¸Šï¼Œå¦‚æœ one ä¸æ˜¯ cmake targetï¼Œ cmake ä¼šå°è¯•åˆ°ç³»ç»Ÿè·¯å¾„æˆ–é¡¹ç›®æŒ‡å®šè·¯å¾„æŸ¥æ‰¾</span></span><br></pre></td></tr></table></figure>

<p>A test, explain this: </p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.8</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>(Calculator LANGUAGES CXX)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_library</span>(calclib STATIC src/calclib.cpp <span class="keyword">include</span>/calc/lib.hpp)</span><br><span class="line"><span class="keyword">target_include_directories</span>(calclib PUBLIC <span class="keyword">include</span>)</span><br><span class="line"><span class="keyword">target_compile_features</span>(calclib PUBLIC cxx_std_11)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(calc apps/calc.cpp)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(calc PUBLIC calclib)</span><br></pre></td></tr></table></figure>

<h3 id="å˜é‡å’Œç¼“å­˜"><a href="#å˜é‡å’Œç¼“å­˜" class="headerlink" title="å˜é‡å’Œç¼“å­˜"></a>å˜é‡å’Œç¼“å­˜</h3><ol>
<li><p>æœ¬åœ°å˜é‡</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(MY_VARIABLE, <span class="string">&quot;value&quot;</span>) <span class="comment"># å˜é‡åé€šå¸¸å…¨éƒ¨å¤§å†™ï¼Œ ä¹‹åæ˜¯å˜é‡å€¼ï¼Œ ä½¿ç”¨ $&#123;&#125; è§£æï¼Œ $&#123;MY_VARIABLE&#125;</span></span><br><span class="line"><span class="keyword">set</span>(MY_LIST, <span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>) <span class="keyword">or</span> <span class="keyword">set</span>(MY_LIST, <span class="string">&quot;one&quot;</span>; <span class="string">&quot;two&quot;</span>) <span class="comment"># åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">17</span>) <span class="comment"># æŒ‡å®šcxxç‰ˆæœ¬</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¯å¢ƒå˜é‡</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(ENV&#123;varable_name&#125;, value)</span><br><span class="line">$ENV&#123;variable_name&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="cmake-ç¼–ç¨‹"><a href="#cmake-ç¼–ç¨‹" class="headerlink" title="cmake ç¼–ç¨‹"></a>cmake ç¼–ç¨‹</h3><h4 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h4><p><strong>IF è¯­å¥</strong></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (variable)</span><br><span class="line">	<span class="comment"># If variable is &quot;ON&quot;, &quot;YES&quot;, &quot;Y&quot;, or non zero number</span></span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">	<span class="comment"># &quot;0&quot;, &quot;OFF&quot;, &quot;NO&quot;, &quot;N&quot; &quot;IGNORE&quot;, &quot;NOTFOUND&quot;, &#x27;&quot;&quot;&#x27;(undefined), or ends in `-NOTFOUND`</span></span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"><span class="comment"># both are not , cmake will expand it try again</span></span><br><span class="line"><span class="comment"># or</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">&quot;$&#123;variable&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>() </span><br><span class="line"><span class="keyword">endif</span>()</span><br></pre></td></tr></table></figure>

<p><strong>å…¶ä»–å¯ç”¨çš„ <em>å…³é”®å­—</em></strong> </p>
<ul>
<li><strong>ä¸€å…ƒå…³é”®å­—ï¼ˆUnary Keywordsï¼‰</strong>ï¼š<ul>
<li>ç”¨äºæ£€æŸ¥å•ä¸ªæ¡ä»¶ã€‚</li>
<li>å¸¸è§çš„ä¸€å…ƒå…³é”®å­—ï¼š<ul>
<li><code>NOT</code>ï¼šé€»è¾‘éï¼Œåè½¬æ¡ä»¶ã€‚</li>
<li><code>TARGET</code>ï¼šæ£€æŸ¥ç›®æ ‡æ˜¯å¦å­˜åœ¨ï¼ˆå¦‚ <code>if(TARGET my_target)</code>ï¼‰ã€‚</li>
<li><code>EXISTS</code>ï¼šæ£€æŸ¥æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨ï¼ˆå¦‚ <code>if(EXISTS &quot;/path/to/file&quot;)</code>ï¼‰ã€‚</li>
<li><code>DEFINED</code>ï¼šæ£€æŸ¥å˜é‡æ˜¯å¦å·²å®šä¹‰ï¼ˆå¦‚ <code>if(DEFINED MY_VAR)</code>ï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><strong>äºŒå…ƒå…³é”®å­—ï¼ˆBinary Keywordsï¼‰</strong>ï¼š<ul>
<li>ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå€¼æˆ–ç»„åˆæ¡ä»¶ã€‚</li>
<li>å¸¸è§çš„äºŒå…ƒå…³é”®å­—ï¼š<ul>
<li><code>STREQUAL</code>ï¼šå­—ç¬¦ä¸²ç›¸ç­‰æ¯”è¾ƒï¼ˆå¦‚ <code>if(var1 STREQUAL &quot;hello&quot;)</code>ï¼‰ã€‚</li>
<li><code>AND</code>ã€<code>OR</code>ï¼šé€»è¾‘ä¸å’Œé€»è¾‘æˆ–ï¼ˆå¦‚ <code>if(var1 AND var2)</code>ï¼‰ã€‚</li>
<li><code>MATCHES</code>ï¼šæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼ˆå¦‚ <code>if(var MATCHES &quot;^[A-Z]+$&quot;)</code>ï¼‰ã€‚</li>
<li><code>VERSION_LESS</code>ã€<code>VERSION_LESS_EQUAL</code>ï¼šç‰ˆæœ¬å·æ¯”è¾ƒï¼ˆå¦‚ <code>if(CMAKE_VERSION VERSION_LESS &quot;3.7&quot;)</code>ï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><strong>æ‹¬å·åˆ†ç»„</strong>ï¼š<ul>
<li>å¯ä»¥ç”¨æ‹¬å· <code>()</code> æ¥æ˜ç¡®æ¡ä»¶çš„ä¼˜å…ˆçº§ï¼Œç±»ä¼¼äºç¼–ç¨‹è¯­è¨€ä¸­çš„é€»è¾‘åˆ†ç»„ã€‚</li>
</ul>
</li>
</ul>
<h4 id="generator-expressions"><a href="#generator-expressions" class="headerlink" title="generator-expressions"></a>generator-expressions</h4><p>éº»çƒ¦</p>
<h4 id="å®å®šä¹‰-å’Œ-å‡½æ•°"><a href="#å®å®šä¹‰-å’Œ-å‡½æ•°" class="headerlink" title="å®å®šä¹‰ å’Œ å‡½æ•°"></a>å®å®šä¹‰ å’Œ å‡½æ•°</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>(SIMPLE REQUIRED_ARG)</span><br><span class="line">	<span class="keyword">message</span>(STATUS, <span class="string">&quot;Simple arguments: $&#123;REQUIRED_ARG&#125;, followed by $&#123;ARGN&#125;&quot;</span>)</span><br><span class="line">    <span class="comment"># ARGN æœªæ˜ç¡®å®šä¹‰çš„é¢å¤–å‚æ•°, ARGV: æ‰€æœ‰å‚æ•°</span></span><br><span class="line">	<span class="keyword">set</span>(<span class="variable">$&#123;REQUIRED_ARG&#125;</span> <span class="string">&quot;From SIMPLE&quot;</span>, PARENT_SCOPE) <span class="comment"># PARENT_SCOPE æ”¹å˜ä½œç”¨åŸŸï¼Œä½¿å…¶å¤–éƒ¨å¯è§</span></span><br><span class="line"><span class="keyword">endfunction</span>()</span><br><span class="line">simple(This Foo Bar)</span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;Output: $&#123;This&#125;&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>å‡½æ•°å¯ä»¥æ¥å—çš„å‚æ•°ç±»å‹ï¼š </p>
<ul>
<li>ä½ç½®å‚æ•°ï¼š ç›´æ¥ä¼ é€’çš„å€¼</li>
<li>å…³é”®å­—å‚æ•°ï¼š SINGLE, ONE_VALUE ç­‰</li>
<li>å¤šå€¼å‚æ•°ï¼š MULTI_VALUES</li>
</ul>
<h4 id="å‚æ•°æ§åˆ¶"><a href="#å‚æ•°æ§åˆ¶" class="headerlink" title="å‚æ•°æ§åˆ¶"></a>å‚æ•°æ§åˆ¶</h4><ul>
<li>é¿å…è§£æ ARGN ï¼Œå¤æ‚</li>
<li>å…è®¸å‡½æ•°æ¥æ”¶å¤šç§ç±»å‹çš„å‚æ•°</li>
</ul>
<figure class="highlight plaintext"><figcaption><span>ç”¨æ¥è§£æå¤æ‚å‚æ•°çš„å‡½æ•°ï¼Œå°†ä¼ å…¥çš„å‚æ•°åˆ†ç±»å­˜å‚¨åˆ°å¯¹åº”å˜é‡</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```cmake</span><br><span class="line">function(COMPLEX)</span><br><span class="line">    cmake_parse_arguments(</span><br><span class="line">        COMPLEX_PREFIX # ç”Ÿæˆçš„å˜é‡å‰ç¼€</span><br><span class="line">        &quot;SINGLE;ANOTHER&quot;</span><br><span class="line">        &quot;ONE_VALUE;ALSO_ONE_VALUE&quot;</span><br><span class="line">        &quot;MULTI_VALUES&quot;</span><br><span class="line">        $&#123;ARGN&#125;</span><br><span class="line">    )</span><br><span class="line">endfunction()</span><br><span class="line"></span><br><span class="line">complex(SINGLE ONE_VALUE value MULTI_VALUES some other values)</span><br></pre></td></tr></table></figure>

<h2 id="æ¨èçš„ç›®å½•ç»“æ„"><a href="#æ¨èçš„ç›®å½•ç»“æ„" class="headerlink" title="æ¨èçš„ç›®å½•ç»“æ„"></a>æ¨èçš„ç›®å½•ç»“æ„</h2><p><a target="_blank" rel="noopener" href="https://modern-cmake-cn.github.io/Modern-CMake-zh_CN/chapters/basics/structure.html">è¿™å“¥ä»¬æ¨èçš„</a> ï¼Œ <a target="_blank" rel="noopener" href="https://github.com/Modern-CMake-CN/Modern-CMake-zh_CN/tree/master/examples/extended-project">code</a></p>
<p>é¡¹ç›®åç§°ä¸ºproject, åŒ…å«libçš„åº“å’Œappçš„å¯æ‰§è¡Œæ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">- project <span class="comment"># é¡¹ç›®çš„åç§°</span></span><br><span class="line">  - .gitignore</span><br><span class="line">  - README.md</span><br><span class="line">  - LICENCE.md</span><br><span class="line">  - CMakeLists.txt <span class="comment"># é¡¶å±‚ cmake é…ç½®æ–‡ä»¶, å®šä¹‰å…¨å±€è§„åˆ™</span></span><br><span class="line">  - cmake <span class="comment"># å­˜æ”¾è‡ªå®šä¹‰çš„ cmake æ¨¡å—æˆ–è„šæœ¬</span></span><br><span class="line">    - FindSomeLib.cmake</span><br><span class="line">    - something_else.cmake</span><br><span class="line">  - include <span class="comment"># å…¬å…±å¤´æ–‡ä»¶</span></span><br><span class="line">    - project</span><br><span class="line">      - lib.hpp</span><br><span class="line">  - src <span class="comment"># åº“çš„å®ç°æ–‡ä»¶ï¼Œå’Œ include é…åˆä½¿ç”¨ï¼Œ include å­˜æ”¾å¤´æ–‡ä»¶, é€šè¿‡add_libraryç”Ÿæˆåº“æ–‡ä»¶</span></span><br><span class="line">    - CMakeLists.txt</span><br><span class="line">    - lib.cpp</span><br><span class="line">  - apps <span class="comment"># å¯æ‰§è¡Œç¨‹åºçš„å…¥å£ä»£ç </span></span><br><span class="line">    - CMakeLists.txt</span><br><span class="line">    - app.cpp</span><br><span class="line">  - tests</span><br><span class="line">    - CMakeLists.txt</span><br><span class="line">    - testlib.cpp</span><br><span class="line">  - docs</span><br><span class="line">    - CMakeLists.txt</span><br><span class="line">  - extern <span class="comment"># å­˜æ”¾ç¬¬ä¸‰æ–¹åº“</span></span><br><span class="line">    - googletest</span><br><span class="line">  - scripts <span class="comment"># è¾…åŠ©è„šæœ¬</span></span><br><span class="line">    - helper.py</span><br></pre></td></tr></table></figure>

<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p><a target="_blank" rel="noopener" href="https://modern-cmake-cn.github.io/Modern-CMake-zh_CN/">Modern CMake ç®€ä½“zhongâ€™wen</a></p>
<p><a target="_blank" rel="noopener" href="https://subingwen.cn/cmake/CMake-primer/">CMake ä¿å§†çº§æ•™ç¨‹ï¼ˆä¸Šï¼‰</a></p>
</div>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2025-04-19</span>
            
                <span>è¯¥ç¯‡æ–‡ç« è¢« shenzaoyi</span>
            
            
                <span>æ‰“ä¸Šæ ‡ç­¾:
                    
                    
                        <a href='/tags/notes/'>
                            notes
                        </a>
                    
                </span>
             
             
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                
                    <span>ä¸Šä¸€ç¯‡ï¼š<a href='/2025/04/23/jvm/'>jvm</a></span>
                

                
                    <span class="post-footer-pre-next-last-span-right">ä¸‹ä¸€ç¯‡ï¼š<a href="/2025/04/19/qt/">qt</a>
                    </span>
                
            </div>
    
        
    

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
            Â© 1949-2024 China 

            
                

            
        </span>
       
    
</div>



<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>ğŸŒŠæœˆè½ä¹Œå•¼éœœæ»¡å¤©ğŸŒŠ</span>
            
                <span class="footer-last-span-right"><i>æœ¬ç«™ç”±<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>é©±åŠ¨ï½œä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>ä¸»é¢˜</i></span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--ç›®å½•-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--å›åˆ°é¡¶éƒ¨æŒ‰é’®-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // å¯ç”¨æ’ä»¶
            thumbnail: true,          // æ˜¾ç¤ºç¼©ç•¥å›¾
            zoom: true,               // å¯ç”¨ç¼©æ”¾åŠŸ
            rotate: true,             // å¯ç”¨æ—‹è½¬åŠŸèƒ½èƒ½
            autoplay: true,        // å¯ç”¨è‡ªåŠ¨æ’­æ”¾åŠŸèƒ½
            fullScreen: true,      // å¯ç”¨å…¨å±åŠŸèƒ½
            pager: true, //é¡µç ,
            zoomFromOrigin: true,   // ä»åŸå§‹ä½ç½®ç¼©æ”¾
            actualSize: true,       // å¯ç”¨æŸ¥çœ‹å®é™…å¤§å°çš„åŠŸèƒ½
            enableZoomAfter: 300,    // å»¶è¿Ÿç¼©æ”¾ï¼Œç¡®ä¿å›¾ç‰‡åŠ è½½å®Œæˆåå¯ç¼©æ”¾
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // ä¿®å¤é€‰æ‹©å™¨
    }
    
</script>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> 

                </div>
            
            
                <!-- å›åˆ°é¡¶éƒ¨çš„æŒ‰é’®-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- è¿”å›çš„æŒ‰é’®-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>